<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="./assets/iiita.png" type="image/x-icon">
    <!-- Boxicons CDN Link -->
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
   </head>
<body>
  <div class="sidebar">
    <a href="Admin-home.html">
      <div class="logo-details">
        <i class='bx bxl-c-plus-plus'></i>
        <span class="logo_name">BDA-IIITA<span>
      </div>
    </a>
      <ul class="nav-links">
        <li>
          <a href="#" class="active">
            <i class='bx bx-grid-alt' ></i>
            <span class="links_name">Dashboard</span>
          </a>
        </li>
        <li>
          <a href="Admin-Collab.html">
            <i class='bx bx-box' ></i>
            <span class="links_name">Collaborators</span>
          </a>
        </li>
        <li>
          <a href="Admin-Projects.html">
            <i class='bx bx-list-ul' ></i>
            <span class="links_name">Projects</span>
          </a>
        </li>
        <li>
          <a href="Admin-Courses.html">
            <i class='bx bx-pie-chart-alt-2' ></i>
            <span class="links_name">Courses</span>
          </a>
        </li>
        <li>
          <a href="Admin-Publications.html">
            <i class='bx bxs-book-content' ></i>
            <span class="links_name">Publications</span>
          </a>
        </li>
        <li>
          <a href="Admin-PublicationsReq.html">
            <i class='bx bxs-book-content' ></i>
            <span class="links_name">Publication Requests</span>
          </a>
        </li>
        <li class="log_out">
          <a onclick="SignOut()">
            <i class='bx bx-log-out'></i>
            <span class="links_name">Log out</span>
          </a>
        </li>
      </ul>
  </div>
  <section class="home-section">
    <nav>
      <div class="sidebar-button">
        <i class='bx bx-menu sidebarBtn'></i>
        <span class="dashboard">Admin Dashboard</span>
      </div>
      <!-- <div class="search-box">
        <input type="text" placeholder="Search...">
        <i class='bx bx-search' ></i>
      </div> -->
      <div class="profile-details">
        <img src="user.png" alt="">
        <span class="admin_name">Admin</span>
      </div>
      
    </nav>

    <div class="home-content">
      <div class="overview-boxes">
        <div class="box">
          <div class="right-side">
            <div class="box-topic">Total Collaborators</div>
            <div class="number" id="clbnum"><svg id="clbgif" class="sngf" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin:auto;background:#fff;display:block;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
              <circle cx="27.5" cy="57.5" r="5" fill="#3366ff">
                <animate attributeName="cy" calcMode="spline" keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite" values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.6s"></animate>
              </circle> <circle cx="42.5" cy="57.5" r="5" fill="#f47e60">
                <animate attributeName="cy" calcMode="spline" keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite" values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.44999999999999996s"></animate>
              </circle> <circle cx="57.5" cy="57.5" r="5" fill="#f8b26a">
                <animate attributeName="cy" calcMode="spline" keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite" values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.3s"></animate>
              </circle> <circle cx="72.5" cy="57.5" r="5" fill="#abbd81">
                <animate attributeName="cy" calcMode="spline" keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite" values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.15s"></animate>
              </circle>
              </svg></div>
            <!-- <div class="indicator">
              <i class='bx bx-up-arrow-alt'></i>
              <span class="text">Up from yesterday</span>
            </div> -->
          </div>
          <i class='bx bxs-group cart'></i>
        </div>
        <div class="box">
          <div class="right-side">
            <div class="box-topic">Total Projects</div>
            <div class="number" id="projnum"><svg id="prjgif" class="sngf" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin:auto;background:#fff;display:block;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
              <circle cx="27.5" cy="57.5" r="5" fill="#3366ff">
                <animate attributeName="cy" calcMode="spline" keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite" values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.6s"></animate>
              </circle> <circle cx="42.5" cy="57.5" r="5" fill="#f47e60">
                <animate attributeName="cy" calcMode="spline" keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite" values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.44999999999999996s"></animate>
              </circle> <circle cx="57.5" cy="57.5" r="5" fill="#f8b26a">
                <animate attributeName="cy" calcMode="spline" keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite" values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.3s"></animate>
              </circle> <circle cx="72.5" cy="57.5" r="5" fill="#abbd81">
                <animate attributeName="cy" calcMode="spline" keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite" values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.15s"></animate>
              </circle>
              </svg></div>
            <!-- <div class="indicator">
              <i class='bx bx-up-arrow-alt'></i>
              <span class="text">Up from yesterday</span>
            </div> -->
          </div>
          <i class='bx bxl-python cart two' ></i>
        </div>
        <div class="box">
          <div class="right-side">
            <div class="box-topic">Total Courses</div>
            <div class="number" id="crsnum"><svg id="crsgif" class="sngf" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin:auto;background:#fff;display:block;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
              <circle cx="27.5" cy="57.5" r="5" fill="#3366ff">
                <animate attributeName="cy" calcMode="spline" keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite" values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.6s"></animate>
              </circle> <circle cx="42.5" cy="57.5" r="5" fill="#f47e60">
                <animate attributeName="cy" calcMode="spline" keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite" values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.44999999999999996s"></animate>
              </circle> <circle cx="57.5" cy="57.5" r="5" fill="#f8b26a">
                <animate attributeName="cy" calcMode="spline" keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite" values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.3s"></animate>
              </circle> <circle cx="72.5" cy="57.5" r="5" fill="#abbd81">
                <animate attributeName="cy" calcMode="spline" keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite" values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.15s"></animate>
              </circle>
              </svg></div>
            <!-- <div class="indicator">
              <i class='bx bx-up-arrow-alt'></i>
              <span class="text">Up from yesterday</span>
            </div> -->
          </div>
          <i class='bx bx-slideshow cart three' ></i>
        </div>
        <div class="box">
          <div class="right-side">
            <div class="box-topic">Total Publications</div>
            <div class="number" id="publnum"><svg id="publgif" class="sngf" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="margin:auto;background:#fff;display:block;" width="200px" height="200px" viewBox="0 0 100 100" preserveAspectRatio="xMidYMid">
              <circle cx="27.5" cy="57.5" r="5" fill="#3366ff">
                <animate attributeName="cy" calcMode="spline" keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite" values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.6s"></animate>
              </circle> <circle cx="42.5" cy="57.5" r="5" fill="#f47e60">
                <animate attributeName="cy" calcMode="spline" keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite" values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.44999999999999996s"></animate>
              </circle> <circle cx="57.5" cy="57.5" r="5" fill="#f8b26a">
                <animate attributeName="cy" calcMode="spline" keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite" values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.3s"></animate>
              </circle> <circle cx="72.5" cy="57.5" r="5" fill="#abbd81">
                <animate attributeName="cy" calcMode="spline" keySplines="0 0.5 0.5 1;0.5 0 1 0.5;0.5 0.5 0.5 0.5" repeatCount="indefinite" values="57.5;42.5;57.5;57.5" keyTimes="0;0.3;0.6;1" dur="1s" begin="-0.15s"></animate>
              </circle>
              </svg></div>
          </div>
          <i class='bx bx-book-bookmark cart four' ></i>
        </div>
      </div>

      <div class="sales-boxes">
        <div class="recent-sales box">
          <div style="display: flex;align-items: center;justify-content: center;margin-top: 10px;">
            <h2 >Users List</h2>
          </div>
          
          <div class="data-table">
            <table>
              <thead>
                <th>Sr No.</th>
                <th>Name</th>
                <th>Email</th>
                <th>Phone No</th>
                <th>Delete</th>
              </thead>
              <tbody id="tbody1">
                
              </tbody>
            </table>
          </div>
          
        </div>
        
      </div>
    </div>
  </section>
  <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
  <script>
   let sidebar = document.querySelector(".sidebar");
let sidebarBtn = document.querySelector(".sidebarBtn");
sidebarBtn.onclick = function() {
  sidebar.classList.toggle("active");
  if(sidebar.classList.contains("active")){
  sidebarBtn.classList.replace("bx-menu" ,"bx-menu-alt-right");
}else
  sidebarBtn.classList.replace("bx-menu-alt-right", "bx-menu");
}
function SignOut(){
        sessionStorage.removeItem('admin-BDA-main');
        window.location="index.html";
        // alert("Signed Out Succesfully!");
      }
 </script>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.18.0/firebase-app.js";
      const firebaseConfig = {
          apiKey: "AIzaSyDNee1JHsHXTfZIqBudf-HoHDghcYwdfL0",
          authDomain: "bdaa-a48ca.firebaseapp.com",
          projectId: "bdaa-a48ca",
          storageBucket: "bdaa-a48ca.appspot.com",
          messagingSenderId: "749803302390",
          appId: "1:749803302390:web:9f050fba5b42e166c86bd7"
      };

      const app = initializeApp(firebaseConfig);
      import {getDatabase,ref,set,child,get,remove} from "https://www.gstatic.com/firebasejs/9.18.0/firebase-database.js";

      const db=getDatabase();
      let clb=document.getElementById('clbnum');
      let prj=document.getElementById('projnum');
      let crs=document.getElementById('crsnum');
      let pub=document.getElementById('publnum');
      function UpdateNums(){
        const dbRef=ref(db);
        get(child(dbRef,"Publications/")).then((dataArr)=>{
          var ct=0;
          dataArr.forEach(e=>{
            e.forEach(x=>{
              ct++;
            })
          })
           let x=document.createElement('p');
           x.innerText=ct;
           x.classList.add("sngf");
           let clbgf=document.getElementById("publgif");
           pub.removeChild(clbgf);
           pub.appendChild(x);
        })
        get(child(dbRef,"Collaborator")).then((snapshot)=>{
           var ct=0;
           snapshot.forEach(e => {
              ct++;
           });
           let x=document.createElement('p');
           x.innerText=ct;
           x.classList.add("sngf");
           let clbgf=document.getElementById("clbgif");
           clb.removeChild(clbgf);
           clb.appendChild(x);
        })
        get(child(dbRef,"ProjectList")).then((snapshot)=>{
           var ct=0;
           snapshot.forEach(e => {
              ct++;
           });
           let x=document.createElement('p');
           x.innerText=ct;
           x.classList.add("sngf");
           let prjgf=document.getElementById("prjgif");
           prj.removeChild(prjgf);
           prj.appendChild(x);
        })
        get(child(dbRef,"CourseList")).then((snapshot)=>{
           var ct=0;
           snapshot.forEach(e => {
              ct++;
           });
           let x=document.createElement('p');
           x.innerText=ct;
           x.classList.add("sngf");
           let crsgf=document.getElementById("crsgif");
           crs.removeChild(crsgf);
           crs.appendChild(x);
        })
      }
      var srno;
      function UpdateUsers(){
        const dbRef=ref(db);
        let tbod=document.getElementById('tbody1');
        tbod.innerHTML="";
        get(child(dbRef,"UsersList")).then((snapshot)=>{
          snapshot.forEach(e=>{
            var newrow=document.createElement('tr');
            var srcol=document.createElement('td');
            srcol.innerText=++srno;
            var namecol=document.createElement('td');
            namecol.innerText=e.val().firstname+" "+e.val().lastname;
            var mailcol=document.createElement('td');
            mailcol.innerText=e.val().email;  
            var phoneCol=document.createElement('td');
            phoneCol.innerText=e.val().phone_no;
            var bc=document.createElement('i');
            bc.innerHTML=`<ion-icon name="trash-outline"></ion-icon>`;
            bc.classList.add("op-ic");
            bc.onclick=function(){delData(e.val().phone_no)};
            newrow.appendChild(srcol);
            newrow.appendChild(namecol);
            newrow.appendChild(mailcol);
            newrow.appendChild(phoneCol);
            newrow.appendChild(bc);
            tbod.appendChild(newrow);
          })
        })
      }
      function delData(num){
        const dbRef=ref(db);
        remove(child(dbRef,"UsersList/"+num)).then(()=>{
          alert("User Removed Successfully!");
          UpdateAll();
        }).catch(()=>{
          alert("Error");
        })
      }
      function UpdateAll(){
        check();
        UpdateNums();
        srno=0;
        UpdateUsers();
      }
      function check(){
        let x=sessionStorage.getItem('admin-BDA-main');
        if(x===null){
            window.location="admin-login.html";
        }
    }
      window.onload=UpdateAll;
      
  </script>
 
</body>
</html>
